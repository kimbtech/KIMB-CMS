/* KIMB ContentManagementSystem Add-on - Copyright (c) 2016 by KIMB-technologies.eu - https://www.KIMB-technologies.eu - http://www.gnu.org/licenses/gpl-3.0 */
$(function(){makestructur();make_ergeb()});var structur={main:"div#addon_survey_main"}
var ajaxpost={data:{},task:'auswertung',uid:addsur.uid}
function makestructur(){var struc='<div id="meldungen"></div>'+'<div id="auswertung"></div>';structur.aus="div#auswertung";structur.mel="div#meldungen"
var loader='<div id="daten_loading" style="display:none;">';loader+='<div style="position:fixed; top:0; left:0; z-index:50; background-color:gray; opacity:0.5; width:100%; height:100%;">';loader+='</div>';loader+='<div style="position:fixed; top:calc( 50% - 64px ); left:calc( 50% - 64px ); background-color:#5d7; border-radius:20px; padding:15px; z-index:51;">';loader+='<img src="'+addsur.su+'/load/system/spin_load.gif" title="Lädt!!" alt="Lädt!!">';loader+='</div>';loader+='</div>';struc+=loader;$(document).bind("ajaxSend",function(){$("#daten_loading").show("highlight")}).bind("ajaxComplete",function(){$("#daten_loading").hide("highlight")});$(structur.main).html(struc);$("#daten_loading").hide("highlight")}
var errortimeout;function errormessage(meldung){clearTimeout(errortimeout);$(structur.mel).html('<div class="surveyerrorbox"><p>'+meldung+'</p><p><button id="closeerrboxsur">Schließen</button></p></div>');$("button#closeerrboxsur").click(function(){$(structur.mel).html('')});errortimeout=setTimeout(function(){$(structur.mel).html('')},5000)}
function ajaxrequest(padd,elem){if(typeof elem==="function"){var cb=!0}
else{var cb=!1}
ajaxpost.data=padd;$.post(addsur.su+"/ajax.php?addon=survey",ajaxpost).always(function(output){if(typeof output.data=="undefined"||typeof output.okay!="boolean"||typeof output.error!="boolean"){errormessage("Der Sever antwortet nicht korrekt!")}
else{if(output.error||!output.okay){errormessage('Es gab einen Fehler mit dem Request!')}
else{var data=output.data;if(data!=null){if(cb){elem(data)}
else{$(elem).html(data)}}}}})}