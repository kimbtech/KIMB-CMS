$(function(){$("div#content").prepend('<div style="position:relative;"><button id="editorloader_dialog_btn" title="Editoren für Inhalte verwalten" style="display:inline-block; position:absolute; right:5px; top:5px;"><span class="ui-icon ui-icon-pencil"></span></button></div>');$("button#editorloader_dialog_btn").click(function(){var html='<div id="editorloader_dialog" title="Editoren verwalten">';html+='<p>Bitte wählen Sie einen der folgenden Editoren, mit dem Sie die HTML und Markdown Inhalte der Seiten bearbeiten wollen:</p>';html+='<input type="radio" name="editorloader_wahl" value="tinymce">TinyMCE ';html+='<span class="ui-icon ui-icon-info" style="display:inline-block;" title="TinyMCE ist ein vollständig ausgestatteter WYSIWYG HTML Editor. So können Sie auch ohne HTML Kenntnisse Ihre Seiten bearbeiten."></span><br />';html+='<input type="radio" name="editorloader_wahl" value="codemirror">CodeMirror ';html+='<span class="ui-icon ui-icon-info" style="display:inline-block;" title="CodeMirror ist ein guter HTML und Markdown Editor mit Syntaxhilighting."></span><br />';html+='<input type="radio" name="editorloader_wahl" value="textarea">Textfeld ';html+='<span class="ui-icon ui-icon-info" style="display:inline-block;" title="Nutzen Sie ein einfaches Textfeld zur Eingabe der Inhalte."></span><br />';html+='<p><small>Ihre Auswahl wird lokal in Ihrem Browser gespeichert. (Speicherdauer je nach Einstellung; mindestens jedoch für diese Session)</small></p>';html+='</div>';$("body").append(html);var editor=window.localStorage.getItem("editorloader");if(editor!==null){$("input[name=editorloader_wahl][value="+editor+"]").prop("checked",!0)}
else{$("input[name=editorloader_wahl][value=tinymce]").prop("checked",!0)}
$("div#editorloader_dialog").dialog({modal:!0,minWidth:500,maxWidth:500,beforeClose:function(event,ui){$(this).remove()},buttons:[{text:"Speichern & Übernehmen",icons:{primary:"ui-icon-circle-check"},click:function(){save_settings();$(this).dialog("close")}},{text:"Schließen",icons:{primary:"ui-icon-circle-close"},click:function(){$(this).dialog("close")}}]})});function save_settings(){var old=window.localStorage.getItem("editorloader");var editor=$("input[name=editorloader_wahl]:checked").val();window.localStorage.setItem("editorloader",editor);if(old!=editor){reload_all(old,editor)}}
function reload_all(old,editor){if(old=="tinymce"||typeof old==="undefined"){editorloader_ids.forEach(function(v){tinymce.EditorManager.execCommand("mceRemoveEditor",!0,v)})}
else if(old=="codemirror"){editorloader_ids.forEach(function(v){var cm=codemirrorloader_instances[v];cm.toTextArea()})}
if(editor!="textarea"){editorloader_ids.forEach(function(v){editorloader_add(v,"no")})}
return !0}});var editorloader_ids=Array();function editorloader_add(id,save){if(typeof save==="undefined"){editorloader_ids.push(id)}
var editor=window.localStorage.getItem("editorloader");if(editor=="tinymce"){tinymceloader_add(id)}
else if(editor=="codemirror"){codemirrorloader_add(id)}
else if(editor=="textarea"){}
else{tinymceloader_add(id)}}
function tinymceloader_add(id){tinymce.init({selector:"#"+id,theme:"modern",plugins:["advlist autosave autolink lists link image charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons paste textcolor colorpicker textpattern code","fontawesome noneditable"],toolbar1:"styleselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent hr ",toolbar2:"fontselect | undo redo | forecolor backcolor | link image emoticons fontawesome | preview fullscreen | code searchreplace",image_advtab:!0,language:"de",width:680,height:300,resize:"horizontal",content_css:codemirrorloader_siteurl+"/load/system/theme/design_for_tiny.min.css,"+codemirrorloader_siteurl+"/load/system/fontawesome/font-awesome.min.css",browser_spellcheck:!0,image_list:codemirrorloader_siteurl+"/ajax.php?file=sites.php&img",link_list:codemirrorloader_siteurl+"/ajax.php?file=sites.php&links",autosave_interval:"20s",autosave_restore_when_empty:!0,autosave_retention:"60m",menubar:"file edit insert view format table",convert_urls:!1,setup:function(ed){ed.on('init',function(e){$("iframe#"+id+"_ifr").tooltip({disabled:!0})})},extended_valid_elements:'span[class]',})}